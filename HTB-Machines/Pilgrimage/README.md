# Pilgrimage
#### Pilgrimage Hack The box
Hello Hackers, I'm [0xDigimon](https://www.linkedin.com/in/abdelmawla-elamrosy/)<br><img src="https://github.com/0xDigimon/CyLert-Internship/blob/main/HTB-Machines/Pilgrimage/media/01.png?raw=true"><br>
using nmap scanner <br><img src="https://github.com/0xDigimon/CyLert-Internship/blob/main/HTB-Machines/Pilgrimage/media/02.png?raw=true"><br>i discoverd HTTP <br><img src="https://github.com/0xDigimon/CyLert-Internship/blob/main/HTB-Machines/Pilgrimage/media/03.png?raw=true"><br> so i record this domain in ```/etc/hosts``` and now open webite <br><img src="https://github.com/0xDigimon/CyLert-Internship/blob/main/HTB-Machines/Pilgrimage/media/04.png?raw=true"><br>let's discover website and run fuzzer ```dirsearch -u "http://pilgrimage.htb"``` and i found .git, now i have a source code <br><img src="https://github.com/0xDigimon/CyLert-Internship/blob/main/HTB-Machines/Pilgrimage/media/05.png?raw=true"><br>using GitTools to get source code ```gitDumper```and``` extractor```<br><img src="https://github.com/0xDigimon/CyLert-Internship/blob/main/HTB-Machines/Pilgrimage/media/06.png?raw=true"><br>i found some Important information in php files <br><img src="https://github.com/0xDigimon/CyLert-Internship/blob/main/HTB-Machines/Pilgrimage/media/07.png?raw=true"><br> now i know database format <br>
i found executable file called ```magick``` i do some tries in this program and do some search about version <br><img src="https://github.com/0xDigimon/CyLert-Internship/blob/main/HTB-Machines/Pilgrimage/media/08.png?raw=true"><br>
this version is vulnerable NICE (: <br><img src="https://github.com/0xDigimon/CyLert-Internship/blob/main/HTB-Machines/Pilgrimage/media/09.png?raw=true"><br>by doing some search about how to exploit i found this [website](https://www.metabaseq.com/imagemagick-zero-days/) now i understand how to use it and i read ```/etc/passwd``` <br><img src="https://github.com/0xDigimon/CyLert-Internship/blob/main/HTB-Machines/Pilgrimage/media/10.png?raw=true"><br><img src="https://github.com/0xDigimon/CyLert-Internship/blob/main/HTB-Machines/Pilgrimage/media/11.png?raw=true"><br> after that i did some search in php files and i found path SQL queries to a SQLite database located at ```/var/db/pilgrimage```<br><img src="https://github.com/0xDigimon/CyLert-Internship/blob/main/HTB-Machines/Pilgrimage/media/12.png?raw=true"><br>and i found users and passwors <br><img src="https://github.com/0xDigimon/CyLert-Internship/blob/main/HTB-Machines/Pilgrimage/media/13.png?raw=true"><br>```emily:abigchonkyboi123```&```admin:admin``` <br><img src="https://github.com/0xDigimon/CyLert-Internship/blob/main/HTB-Machines/Pilgrimage/media/14.png?raw=true"><br>i gained access by ssh <br><img src="https://github.com/0xDigimon/CyLert-Internship/blob/main/HTB-Machines/Pilgrimage/media/15.png?raw=true"><br>and got on user flag (: <br> now let's escalate our privillege, I used pspy script and found ```malwarescan.sh``` <br><img src="https://github.com/0xDigimon/CyLert-Internship/blob/main/HTB-Machines/Pilgrimage/media/16.png?raw=true"><br>
i read the script <br><img src="https://github.com/0xDigimon/CyLert-Internship/blob/main/HTB-Machines/Pilgrimage/media/17.png?raw=true"><br> i notice some important informations this script use ```/usr/bin/inotifywait``` and ```/usr/local/bin/binwalk``` i search about it and i found i can exploit [binwalk](https://www.exploit-db.com/exploits/51249) <br> HINT: Binwalk is a popular command-line tool in Linux that is used for analyzing, reverse engineering, and extracting firmware images <br><img src="https://github.com/0xDigimon/CyLert-Internship/blob/main/HTB-Machines/Pilgrimage/media/18.png?raw=true"><br> 
after some tries <strong>BOOOOM</strong> i have a root privillege <br><img src="https://github.com/0xDigimon/CyLert-Internship/blob/main/HTB-Machines/Pilgrimage/media/19.png?raw=true"><br> <img src="https://github.com/0xDigimon/CyLert-Internship/blob/main/HTB-Machines/Pilgrimage/media/20.png?raw=true"><br>
<hr>

### Thanks For Reading (:
<hr>
